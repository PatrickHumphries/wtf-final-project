import { useEffect, useState } from "react";

import { useParams } from "react-router-dom";
import { Favorites } from "../model/dbFavModel";
import { getUserFavorites } from "../service/WtfApiService";

interface User {
    _id: string;
}

function FavoritesList() {
    const _id: string = useParams<User>()._id;

    const [ userFavorites, setUserFavorites ] = useState<Favorites[]>( [] );
    const [ userFavoritesLoaded, setUserFavoritesLoaded ] = useState( false );

    useEffect( () => {
        // load our initial data here.
        loadFavorites( _id );
    }, [ _id ] );

    function loadFavorites( _id: string ) {
        getUserFavorites( _id ).then( fav => {
            setUserFavorites( fav );
            setUserFavoritesLoaded( true );
        } );
    }